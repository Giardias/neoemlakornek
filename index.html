<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antalya Emlak | Satılık & Kiralık Daire, Villa, Arsa | NEO YAPI</title>
    <meta name="description" content="Antalya'da en güncel satılık ve kiralık emlak ilanları. Daire, villa, arsa, işyeri. 0532 100 20 30 hemen ulaşın. Güvenilir gayrimenkul danışmanlığı.">
    <meta name="keywords" content="Antalya emlak, satılık daire, kiralık villa, Lara, Konyaaltı, Muratpaşa, gayrimenkul">
    <meta name="author" content="NEO YAPI">
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/609/609803.png">
    
    <!-- Open Graph for social media -->
    <meta property="og:title" content="Antalya Emlak | Satılık & Kiralık | NEO YAPI">
    <meta property="og:description" content="Antalya'da en güncel emlak ilanları. Daire, villa, arsa, işyeri.">
    <meta property="og:image" content="https://images.unsplash.com/photo-1600596542815-27b88e54e695?q=85&w=800">
    <meta property="og:url" content="https://neoyapi.com">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0F172A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Main CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- NAVBAR -->
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <a href="index.html" class="logo" aria-label="NEO YAPI Ana Sayfa">
                NEO<span>YAPI</span>
            </a>
            <button class="menu-toggle" onclick="toggleMenu()" aria-label="Open menu" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
            <div class="nav-links" id="navLinks" role="menubar">
                <a href="index.html" class="active" role="menuitem">VİTRİN</a>
                <a href="project.html" role="menuitem">PROJELER</a>
                <a href="about.html" role="menuitem">KURUMSAL</a>
                <a href="number.html" role="menuitem">İLETİŞİM</a>
            </div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <header class="hero" role="banner">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1>Antalya'da Satılık & Kiralık Emlak İlanları</h1>
            <p>En güncel gayrimenkul fırsatları ile hayalinizdeki evi bulun</p>
        </div>
    </header>

    <!-- Breadcrumb for SEO -->
    <div>
        <br>
        <br>
    </div>

    <!-- FILTER SECTION -->
    <div class="filter-section" role="search">
        <div class="filter-group">
            <input type="text" id="searchInput" placeholder="İlan Ara (Örn: Lara, deniz, 3+1...)" onkeyup="applyFilter()" aria-label="Search listings">
        </div>
        <div class="filter-group">
            <select id="filterCategory" onchange="applyFilter()" aria-label="Filter by category">
                <option value="all">Tüm Kategoriler</option>
                <option value="konut">Konut / Daire</option>
                <option value="villa">Lüks Villa</option>
                <option value="arsa">Arsa / Arazi</option>
                <option value="isyeri">Ticari / İşyeri</option>
            </select>
        </div>
        <div class="filter-group">
            <select id="filterSort" onchange="applyFilter()" aria-label="Sort listings">
                <option value="new">En Yeniler</option>
                <option value="price-asc">Fiyat: Düşükten Yükseğe</option>
                <option value="price-desc">Fiyat: Yüksekten Düşüğe</option>
            </select>
        </div>
        <button class="btn-filter" onclick="applyFilter()" aria-label="Apply filters">
            <i class="fas fa-search"></i> ARA
        </button>
    </div>

    <!-- FEATURED LISTINGS -->
    <section class="container" aria-labelledby="featured-title">
        <h2 id="featured-title" class="section-title">
            Vitrin Fırsatları 
            <span id="vitrinCounter" class="vitrin-counter">Yükleniyor...</span>
        </h2>
        <span class="section-subtitle" id="featured-subtitle">Özenle seçilmiş premium ilanlar</span>
        <div class="grid" id="showcaseGrid" role="list" aria-label="Featured listings">
            <div class="loading-placeholder">
                <i class="fas fa-home"></i>
                <p>Vitrin ilanları yükleniyor...</p>
            </div>
        </div>
    </section>

    <!-- ALL LISTINGS -->
    <section class="container" style="background-color: #fff; border-top: 1px solid #f1f1f1;" aria-labelledby="all-listings-title">
        <h2 id="all-listings-title" class="section-title">Tüm İlanlar</h2>
        <span id="resultCountLabel" class="section-subtitle">İlanlar yükleniyor...</span>
        <div class="grid" id="mainGrid" role="list" aria-label="All listings">
            <div class="loading-placeholder">
                <i class="fas fa-spinner fa-spin"></i>
                <p>İlanlar yükleniyor...</p>
            </div>
        </div>
    </section>

    <!-- WHATSAPP BUTTON -->
    <a href="https://wa.me/905321002030?text=Merhaba,%20NEO%20YAPI%20ilanlarınız%20hakkında%20bilgi%20almak%20istiyorum." 
       target="_blank" 
       class="whatsapp-float"
       aria-label="Contact via WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- FOOTER -->
    <footer style="background: #0F172A; color: #94A3B8; padding: 60px 0; border-top: 5px solid #C5A059; margin-top: 60px;" role="contentinfo">
        <div class="container" style="text-align: center;">
            <h2 style="font-family: 'Playfair Display', serif; color: white; margin-bottom: 20px;">NEO YAPI</h2>
            <p style="max-width: 600px; margin: 0 auto 30px;">Kalite, güven ve şeffaflık ilkeleriyle Antalya'da gayrimenkul sektöründe fark yaratıyoruz.</p>
            <div style="font-size: 24px; display: flex; justify-content: center; gap: 20px; margin-bottom: 30px;">
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                <a href="https://wa.me/905321002030" target="_blank" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
            </div>
            <p style="font-size: 14px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                © 2026 NEO YAPI A.Ş. Tüm hakları saklıdır. | 
            </p>
        </div>
    </footer>

    <!-- MODAL FOR LISTING DETAILS -->
    <div id="detailModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-hidden="true">
        <div class="modal-window">
            <button class="close-btn" onclick="closeModal()" aria-label="Close modal">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="modal-left">
                <button class="slider-btn prev" onclick="changeSlide(-1)" aria-label="Previous image">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <img id="m-img" src="" class="modal-img" alt="Listing image">
                <button class="slider-btn next" onclick="changeSlide(1)" aria-label="Next image">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <div id="m-count" class="img-counter">1 / 1</div>
            </div>

            <div class="modal-right">
                <div class="modal-header">
                    <h2 id="m-title">İlan Başlığı</h2>
                    <span id="m-loc" style="color:#64748B; font-weight:600;">
                        <i class="fas fa-map-marker-alt"></i> Konum
                    </span>
                </div>
                
                <div class="modal-price" id="m-price" style="font-size:32px; font-weight:800; color:#C5A059; margin: 20px 0;">
                    0 ₺
                </div>
                
                <div id="m-specs"></div>
                
                <h4 style="color:#0F172A; margin-bottom:10px;">Açıklama</h4>
                <p id="m-desc" style="font-size:14px; color:#475569; line-height:1.7; margin-bottom: 20px;"></p>
                
                <h4 style="color:#0F172A; margin-bottom:10px;">Konum</h4>
                <div id="modal-map" style="width: 100%; height: 250px; border-radius: 12px; margin-bottom: 20px; overflow: hidden; border: 1px solid #E2E8F0; background:#eee;" 
                     role="region" aria-label="Property location map"></div>
                
                <!-- ACTION BUTTONS -->
                <div class="action-buttons" style="display: flex; gap: 10px; margin-top: 20px;">
                    <a href="https://wa.me/905321002030" 
                       target="_blank" 
                       style="flex:1; background:#25D366; color:white; padding:15px; text-align:center; border-radius:8px; font-weight:700; text-decoration:none;"
                       aria-label="Contact via WhatsApp about this listing">
                        <i class="fab fa-whatsapp"></i> WhatsApp'tan Sor
                    </a>
                    <button onclick="closeModal()" 
                            style="flex:1; background:#64748B; color:white; border:none; padding:15px; border-radius:8px; font-weight:700; cursor:pointer;"
                            aria-label="Close details">
                        Kapat
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // Firebase Configuration - UPDATE THIS WITH YOUR OWN!
        const firebaseConfig = {
            apiKey: "AIzaSyBF5hsTqXl5hSJk3z-_kuECRrQzaVl-aj8",
            authDomain: "neoproject-e1cdd.firebaseapp.com",
            databaseURL: "https://neoproject-e1cdd-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "neoproject-e1cdd",
            storageBucket: "neoproject-e1cdd.firebasestorage.app",
            messagingSenderId: "900464535576",
            appId: "1:900464535576:web:5182d851532d84d21ffb6d",
            measurementId: "G-C47VH3DEDG"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Improved Sample Listings with multiple HD images
        const EXAMPLE_LISTINGS = [
            {
                id: "ex1",
                title: "Lara'da Deniz Manzaralı Lüks 4+1 Daire",
                price: "18.500.000 ₺",
                loc: "Muratpaşa, Lara",
                category: "konut",
                images: [
                    "https://images.unsplash.com/photo-1512918728675-ed5a9ecdebfd?w=800&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w-800&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1484101403633-562f891dc89a?w=800&auto=format&fit=crop"
                ],
                details: { m2: "220", oda: "4+1", kat: "8. Kat" },
                desc: "Lara bölgesinde, denize sıfır konumda, ferah ve aydınlık 4+1 lüks daire. Yüksek kalitemi malzemeler, geniş balkon, kapalı otopark.",
                featured: true,
                date: new Date().toISOString()
            },
            {
                id: "ex2",
                title: "Konyaaltı'nda Havuzlu Site İçi 3+1",
                price: "9.750.000 ₺",
                loc: "Konyaaltı, Liman",
                category: "konut",
                images: [
                    "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1484154218962-a1c002085aac?w=800&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800&auto=format&fit=crop"
                ],
                details: { m2: "140", oda: "3+1", kat: "3. Kat" },
                desc: "Konyaaltı sahiline yürüme mesafesinde, yüzme havuzlu, fitness salonlu, 24 saat güvenlikli sitede ferah 3+1 daire.",
                featured: true,
                date: new Date().toISOString()
            },
            {
                id: "ex3",
                title: "Yeşilbayır'da Özel Havuzlu Villa",
                price: "32.000.000 ₺",
                loc: "Döşemealtı, Yeşilbayır",
                category: "villa",
                images: [
                    "https://images.unsplash.com/photo-1613977257363-707ba9348227?w=800&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1580587771525-78b9dba3b914?w=800&auto=format&fit=crop",
                    "https://images.unsplash.com/photo-1513584684374-8bab748fbf90?w=800&auto=format&fit=crop"
                ],
                details: { m2: "450", oda: "6+1", kat: "Triplex" },
                desc: "1000m² bahçe içinde, özel yüzme havuzlu, akıllı ev sistemi, güneş enerjili, doğalgazlı ultra lüks villa.",
                featured: true,
                date: new Date().toISOString()
            }
        ];

        let allListings = [];
        let currentListing = null;
        let currentSlideIndex = 0;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log("✅ NEO YAPI sitesi yüklendi!");
            loadListingsFromFirebase();
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') closeModal();
                if (e.key === 'ArrowLeft' && document.getElementById('detailModal').classList.contains('active')) {
                    changeSlide(-1);
                }
                if (e.key === 'ArrowRight' && document.getElementById('detailModal').classList.contains('active')) {
                    changeSlide(1);
                }
            });
            
            // Close modal on outside click
            window.onclick = function(e) {
                if (e.target === document.getElementById('detailModal')) {
                    closeModal();
                }
            }
            
            // Add optimized-card class to all cards
            setTimeout(() => {
                document.querySelectorAll('.card').forEach(card => {
                    card.classList.add('optimized-card');
                });
            }, 500);
        });

        // Load from Firebase
        function loadListingsFromFirebase() {
            const listingsRef = ref(db, 'listings');
            
            onValue(listingsRef, (snapshot) => {
                const data = snapshot.val();
                allListings = [];
                
                if (data && Object.keys(data).length > 0) {
                    Object.keys(data).forEach(key => {
                        allListings.push({ id: key, ...data[key] });
                    });
                    console.log(`✅ ${allListings.length} ilan Firebase'den yüklendi`);
                } else {
                    allListings = [...EXAMPLE_LISTINGS];
                    console.log("ℹ️ Örnek ilanlar gösteriliyor");
                }
                
                renderAllListings();
                
            }, (error) => {
                console.log("⚠️ Firebase bağlantı hatası:", error);
                allListings = [...EXAMPLE_LISTINGS];
                renderAllListings();
            });
        }

        // Render all listings
        function renderAllListings() {
            const featuredListings = allListings.filter(item => item.featured === true);
            
            document.getElementById('vitrinCounter').textContent = `${featuredListings.length} ilan`;
            renderGrid(featuredListings, 'showcaseGrid');
            renderGrid(allListings, 'mainGrid');
            document.getElementById('resultCountLabel').textContent = `${allListings.length} ilan listeleniyor`;
            
            // Update structured data for SEO
            updateStructuredData();
        }

        // Render grid with optimized cards
        function renderGrid(data, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            
            if (data.length === 0) {
                container.innerHTML = `
                    <div class="loading-placeholder">
                        <i class="fas fa-home"></i>
                        <p>Bu kategoride ilan bulunmuyor.</p>
                    </div>
                `;
                return;
            }
            
            data.forEach((item, index) => {
                const img = item.images && item.images.length > 0 ? item.images[0] : 
                           'https://via.placeholder.com/400x300/0F172A/FFFFFF?text=NEO+YAPI';
                
                const card = document.createElement('article');
                card.className = 'card optimized-card';
                card.style.animationDelay = `${index * 0.05}s`;
                card.onclick = () => openModal(item);
                card.setAttribute('role', 'listitem');
                
                const featuredBadge = item.featured ? 
                    '<span class="featured-badge" style="position:absolute; top:10px; right:10px; background:#C5A059; color:white; padding:6px 12px; border-radius:20px; font-size:11px; font-weight:700; z-index:5;"><i class="fas fa-star"></i> VİTRİN</span>' : '';
                
                card.innerHTML = `
                    <div class="card-img-wrap">
                        <img src="${img}" alt="${item.title} - ${item.loc}" loading="lazy">
                        ${featuredBadge}
                        <span class="tag ${getTagClass(item.category)}">${item.category.toUpperCase()}</span>
                        <div class="overlay"><i class="fas fa-search-plus"></i> İNCELE</div>
                    </div>
                    <div class="card-body">
                        <div class="price">${item.price}</div>
                        <h3 class="title">${item.title}</h3>
                        <p class="loc"><i class="fas fa-map-marker-alt"></i> ${item.loc}</p>
                        <div class="specs">
                            <span><i class="fas fa-ruler-combined"></i> ${item.details?.m2 || '-'} m²</span>
                            <span><i class="fas fa-bed"></i> ${item.details?.oda || '-'}</span>
                            <span><i class="fas fa-layer-group"></i> ${item.details?.kat || '-'}</span>
                        </div>
                        <button class="btn-card">DETAYLAR</button>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        function getTagClass(category) {
            const classes = {
                'konut': 'tag-green',
                'villa': 'tag-gold',
                'arsa': 'tag-navy',
                'isyeri': 'tag-red'
            };
            return classes[category] || 'tag-gold';
        }

        // Update structured data for SEO
        function updateStructuredData() {
            const script = document.getElementById('structured-data');
            if (script) script.remove();
            
            const structuredData = {
                "@context": "https://schema.org",
                "@type": "RealEstateAgent",
                "name": "NEO YAPI",
                "description": "Antalya'da gayrimenkul danışmanlığı",
                "url": window.location.href,
                "address": {
                    "@type": "PostalAddress",
                    "addressLocality": "Antalya",
                    "addressRegion": "Akdeniz",
                    "addressCountry": "TR"
                },
                "telephone": "+905321002030"
            };
            
            const scriptTag = document.createElement('script');
            scriptTag.id = 'structured-data';
            scriptTag.type = 'application/ld+json';
            scriptTag.textContent = JSON.stringify(structuredData);
            document.head.appendChild(scriptTag);
        }

        // MODAL FUNCTIONS
        window.openModal = function(item) {
            currentListing = item;
            currentSlideIndex = 0;
            
            const modal = document.getElementById('detailModal');
            if (!modal) return;
            
            document.getElementById('m-title').textContent = item.title;
            document.getElementById('m-loc').innerHTML = `<i class="fas fa-map-marker-alt"></i> ${item.loc}`;
            document.getElementById('m-price').textContent = item.price;
            document.getElementById('m-desc').textContent = item.desc;
            
            document.getElementById('m-specs').innerHTML = `
                <div class="spec-grid">
                    <div class="spec-item">
                        <i class="fas fa-ruler-combined" style="color:#C5A059;"></i>
                        <span>ALAN</span>
                        <strong>${item.details?.m2 || '-'} m²</strong>
                    </div>
                    <div class="spec-item">
                        <i class="fas fa-bed" style="color:#C5A059;"></i>
                        <span>ODA</span>
                        <strong>${item.details?.oda || '-'}</strong>
                    </div>
                    <div class="spec-item">
                        <i class="fas fa-layer-group" style="color:#C5A059;"></i>
                        <span>KAT</span>
                        <strong>${item.details?.kat || '-'}</strong>
                    </div>
                </div>
            `;
            
            if (item.images && item.images.length > 0) {
                document.getElementById('m-img').src = item.images[0];
                document.getElementById('m-img').alt = `${item.title} - Fotoğraf 1`;
                document.getElementById('m-count').textContent = `1 / ${item.images.length}`;
            }
            
            const query = encodeURIComponent(item.loc + ', Antalya');
            document.getElementById('modal-map').innerHTML = `
                <iframe 
                    width="100%" height="100%" frameborder="0" style="border:0" 
                    src="https://maps.google.com/maps?q=${query}&t=&z=14&ie=UTF8&iwloc=&output=embed"
                    loading="lazy"
                    title="${item.title} konumu">
                </iframe>
            `;
            
            const whatsappBtn = document.querySelector('.action-buttons a[href*="whatsapp"]');
            if (whatsappBtn) {
                const message = `Merhaba, ${encodeURIComponent(item.title)} (${item.price}) ilanı hakkında bilgi almak istiyorum.`;
                whatsappBtn.href = `https://wa.me/905321002030?text=${encodeURIComponent(message)}`;
            }
            
            modal.classList.add('active');
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
        };

        window.closeModal = function() {
            const modal = document.getElementById('detailModal');
            modal.classList.remove('active');
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = 'auto';
        };

        window.changeSlide = function(direction) {
            if (!currentListing || !currentListing.images || currentListing.images.length <= 1) return;
            
            currentSlideIndex += direction;
            
            if (currentSlideIndex < 0) {
                currentSlideIndex = currentListing.images.length - 1;
            } else if (currentSlideIndex >= currentListing.images.length) {
                currentSlideIndex = 0;
            }
            
            document.getElementById('m-img').src = currentListing.images[currentSlideIndex];
            document.getElementById('m-img').alt = `${currentListing.title} - Fotoğraf ${currentSlideIndex + 1}`;
            document.getElementById('m-count').textContent = `${currentSlideIndex + 1} / ${currentListing.images.length}`;
        };

        // FILTERING
        window.applyFilter = function() {
            const search = document.getElementById('searchInput')?.value.toLowerCase() || '';
            const category = document.getElementById('filterCategory')?.value || 'all';
            const sort = document.getElementById('filterSort')?.value || 'new';
            
            let filtered = allListings.filter(item => {
                const matchesSearch = item.title.toLowerCase().includes(search) || 
                                    item.loc.toLowerCase().includes(search) ||
                                    (item.desc && item.desc.toLowerCase().includes(search));
                const matchesCategory = category === 'all' || item.category === category;
                return matchesSearch && matchesCategory;
            });
            
            if (sort === 'price-asc') {
                filtered.sort((a, b) => {
                    const priceA = parseInt(a.price.replace(/[^0-9]/g, '')) || 0;
                    const priceB = parseInt(b.price.replace(/[^0-9]/g, '')) || 0;
                    return priceA - priceB;
                });
            } else if (sort === 'price-desc') {
                filtered.sort((a, b) => {
                    const priceA = parseInt(a.price.replace(/[^0-9]/g, '')) || 0;
                    const priceB = parseInt(b.price.replace(/[^0-9]/g, '')) || 0;
                    return priceB - priceA;
                });
            }
            
            renderGrid(filtered, 'mainGrid');
            document.getElementById('resultCountLabel').textContent = `${filtered.length} ilan bulundu`;
        };

        // MOBILE MENU
        window.toggleMenu = function() {
            const navLinks = document.getElementById('navLinks');
            const isExpanded = navLinks.classList.toggle('active');
            document.querySelector('.menu-toggle').setAttribute('aria-expanded', isExpanded);
        };
    </script>
</body>
</html>